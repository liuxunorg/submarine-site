
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Apache Submarine 0.3.0 Documentation: Interpreter Binding Mode</title>
    <meta name="description" content="">
    <meta name="author" content="The Apache Software Foundation">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Le styles -->
    <link href="/assets/themes/submarine/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/assets/themes/submarine/css/style.css?body=1" rel="stylesheet" type="text/css">
    <link href="/assets/themes/submarine/css/syntax.css" rel="stylesheet"  type="text/css" media="screen" /> 
    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- Js -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="/assets/themes/submarine/bootstrap/js/bootstrap.min.js"></script>
    <script src="/assets/themes/submarine/js/docs.js"></script>
    <script src="/assets/themes/submarine/js/anchor.min.js"></script>
    <script src="/assets/themes/submarine/js/toc.js"></script>
    <script src="/assets/themes/submarine/js/lunr.min.js"></script>
    <script src="/assets/themes/submarine/js/search.js"></script>    

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  </head>

  <body>
    
        <div id="menu" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container navbar-container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="navbar-brand">
            <a class="navbar-brand-main" href="http://submarine.apache.org">
              <img src="/assets/themes/submarine/img/submarine_white_logo.png" width="85"
                   style="margin-top: -2px;" alt="Apache Submarine">
              <span style="margin-left: 5px; font-size: 27px;">Submarine</span>
              <a class="navbar-brand-version" href=""
                 style="font-size: 15px; color: white;"> 0.3.0
              </a>
            </a>
          </div>
        </div>
        <nav class="navbar-collapse collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Quick Start <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li class="title"><span>Getting Started</span></li>
                <li><a href="/quickstart/index.html">Quick Start Guide</a></li>
                <li><a href="/quickstart/install.html">Install Submarine</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="/quickstart/tensorflow_with_submarine.html">Tensorflow with Submarine</a></li>
                <li><a href="/quickstart/pytorch_with_submarine.html">PyTorch with Submarine</a></li>
              </ul>
            </li>

            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Usage<b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu">
                <li class="title"><span>Interpreter</span></li>
                <li><a href="/usage/interpreter/overview.html">Overview</a></li>
                <li><a href="/usage/interpreter/interpreter_binding_mode.html">Interpreter Binding Mode</a></li>
                <li><a href="/usage/interpreter/user_impersonation.html">User Impersonation</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span>REST API</span></li>
                <li><a href="/usage/rest_api/submarine_server.html">Submarine Server API</a></li>
                <li><a href="/usage/rest_api/configuration.html">Configuration API</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span>Other Features</span></li>
                <li><a href="/usage/other_features/publishing_paragraphs.html">Publishing Paragraphs</a></li>
                <li><a href="/usage/other_features/personalized_mode.html">Personalized Mode</a></li>
                <li><a href="/usage/other_features/customizing_homepage.html">Customizing Zeppelin Homepage</a></li>
              </ul>
            </li>

            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Setup<b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu">
                <li class="title"><span>Basics</span></li>
                <li><a href="/setup/basics/how_to_build.html">How to Build Zeppelin</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span>Deployment</span></li>
                <li><a href="/setup/deployment/yarn_install.html">Submarine on Yarn</a></li>
                <li><a href="/setup/deployment/docker.html">Submarine on Docker</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span>Operation</span></li>
                <li><a href="/setup/operation/configuration.html">Configuration</a></li>
                <li><a href="/setup/operation/proxy_setting.html">Proxy Setting</a></li>
                <li><a href="/setup/operation/upgrading.html">Upgrading</a></li>
                <li><a href="/setup/operation/trouble_shooting.html">Trouble Shooting</a></li>
              </ul>
            </li>

            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">Ecosystem <b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu">
                <li class="title"><span>Ecosystem</span></li>
                <li><a href="/usage/ecosystem/overview.html">Overview</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="/ecosystem/zeppelin.html">Zeppelin</a></li>
                <li><a href="/ecosystem/jdbc.html">JDBC</a></li>
                <li><a href="/ecosystem/python.html">Python</a></li>
              </ul>
            </li>
            <li>
              <a href="#" data-toggle="dropdown" class="dropdown-toggle">More<b class="caret"></b></a>
              <ul class="dropdown-menu scrollable-menu" style="right: 0; left: auto;">
                <li class="title"><span>Extending Submarine</span></li>
                <li><a href="/development/writing_zeppelin_interpreter.html">Writing Submarine Interpreter</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span>Contributing to Zeppelin</span></li>
                <li><a href="/setup/basics/how_to_build.html">How to Build Zeppelin</a></li>
                <li><a href="/development/contribution/useful_developer_tools.html">Useful Developer Tools</a></li>
                <li><a href="/development/contribution/how_to_contribute_code.html">How to Contribute (code)</a></li>
                <li><a href="/development/contribution/how_to_contribute_website.html">How to Contribute (website)</a></li>
                <li role="separator" class="divider"></li>
                <li class="title"><span>External Resources</span></li>
                <li><a target="_blank" href="">Mailing List</a></li>
                <li><a target="_blank" href="">Apache Submarine Wiki</a></li>
                <li><a target="_blank" href="">Stackoverflow Questions about Zeppelin</a></li>
              </ul>
            </li>
            <li>
              <a href="/search.html" class="nav-search-link">
                <span class="fa fa-search nav-search-icon"></span>
              </a>
            </li>
          </ul>
        </nav><!--/.navbar-collapse -->
      </div>
    </div>



    <div class="content">
      
<!--<div class="hero-unit Interpreter Binding Mode">
  <h1></h1>
</div>
-->

<div class="row">
  <div class="col-md-12">
    <!--
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<h1>Interpreter Binding Mode</h1>

<div id="toc"></div>

<h2>Overview</h2>

<p><center><img src="/assets/themes/submarine/img/docs-img/interpreter_binding_per_note_user.png" height="70%" width="70%"></center>
<center><img src="/assets/themes/submarine/img/docs-img/interpreter_binding_scoped_isolated.png" height="70%" width="70%"></center></p>

<p><br/></p>

<p>Interpreter Process is a JVM process that communicates with Zeppelin daemon using thrift. 
Each interpreter process has a single interpreter group, and this interpreter group can have one or more instances of an interpreter.
(See <a href="../../development/writing_zeppelin_interpreter.html">here</a> to understand more about its internal structure.) </p>

<p>Zeppelin provides 3 different modes to run interpreter process: <strong>shared</strong>, <strong>scoped</strong> and <strong>isolated</strong>.<br>
Also, the user can specify the scope of these modes: <strong>per</strong> user or <strong>per note</strong>.
These 3 modes give flexibility to fit Zeppelin into any type of use cases.</p>

<p>In this documentation, we mainly discuss the <strong>per note</strong> scope in combination with the <strong>shared</strong>, <strong>scoped</strong> and <strong>isolated</strong> modes.</p>

<h2>Shared Mode</h2>

<div class="text-center">
    <img src="/assets/themes/submarine/img/docs-img/interpreter_binding_mode-shared.png" height="40%" width="40%">
</div>

<p><br/></p>

<p>In <strong>Shared</strong> mode, single JVM process and a single session serves all notes. As a result, <code>note A</code> can access variables (e.g python, scala, ..) directly created from other notes.. </p>

<h2>Scoped Mode</h2>

<div class="text-center">
    <img src="/assets/themes/submarine/img/docs-img/interpreter_binding_mode-scoped.png">
</div>

<p><br/></p>

<p>In <strong>Scoped</strong> mode, Zeppelin still runs a single interpreter JVM process but, in the case of per note scope, each note runs in its own dedicated session. 
(Note it is still possible to share objects between these notes via <a href="../../interpreter/spark.html#object-exchange">ResourcePool</a>) </p>

<h2>Isolated Mode</h2>

<div class="text-center">
    <img src="/assets/themes/submarine/img/docs-img/interpreter_binding_mode-isolated.png">
</div>

<p><br/></p>

<p><strong>Isolated</strong> mode runs a separate interpreter process for each note in the case of <strong>per note</strong> scope. 
So, each note has an absolutely isolated session. (But it is still possible to share objects via <a href="../../interpreter/spark.html#object-exchange">ResourcePool</a>) </p>

<h2>Which mode should I use?</h2>

<p><br/></p>

<table><thead>
<tr>
<th>Mode</th>
<th>Each notebook...</th>
<th>Benefits</th>
<th>Disadvantages</th>
<th>Sharing objects</th>
</tr>
</thead><tbody>
<tr>
<td><strong>shared</strong></td>
<td>Shares a single session in a single interpreter process (JVM)</td>
<td>Low resource utilization and it&#39;s easy to share data between notebooks</td>
<td>All notebooks are affected if the interpreter process dies</td>
<td>Can share directly</td>
</tr>
<tr>
<td><strong>scoped</strong></td>
<td>Has its own session in the same interpreter process (JVM)</td>
<td>Less resource utilization than isolated mode</td>
<td>All notebooks are affected if the interpreter process dies</td>
<td>Can&#39;t share directly, but it&#39;s possible to share objects via <a href="../../interpreter/spark.html#object-exchange">ResourcePool</a>)</td>
</tr>
<tr>
<td><strong>isolated</strong></td>
<td>Has its own Interpreter Process</td>
<td>One notebook is not affected directly by other notebooks (<strong>per note</strong>)</td>
<td>Can&#39;t share data between notebooks easily (<strong>per note</strong>)</td>
<td>Can&#39;t share directly, but it&#39;s possible to share objects via <a href="../../interpreter/spark.html#object-exchange">ResourcePool</a>)</td>
</tr>
</tbody></table>

<p>In the case of the <strong>per user</strong> scope (available in a multi-user environment), Zeppelin manages interpreter sessions on a per user basis rather than a per note basis. For example:</p>

<ul>
<li>In <strong>scoped + per user</strong> mode, <code>User A</code>&#39;s notes <strong>might</strong> be affected by <code>User B</code>&#39;s notes. (e.g JVM dies, ...) Because all notes are running on the same JVM</li>
<li>On the other hand, <strong>isolated + per user</strong> mode, <code>User A</code>&#39;s notes will not be affected by others&#39; notes which running on separated JVMs</li>
</ul>

<p><br/></p>

<p>Each Interpreter implementation may have different characteristics depending on the back end system that they integrate. And 3 interpreter modes can be used differently.
Let’s take a look how Spark Interpreter implementation uses these 3 interpreter modes with <strong>per note</strong> scope, as an example.
Spark Interpreter implementation includes 4 different interpreters in the group: Spark, SparkSQL, Pyspark and SparkR. 
SparkInterpreter instance embeds Scala REPL for interactive Spark API execution.</p>

<p><br/></p>

<div class="text-center">
    <img src="/assets/themes/submarine/img/docs-img/interpreter_binding_mode-example-spark-shared.png" height="40%" width="40%">
</div>

<p><br/></p>

<p>In Shared mode, a SparkContext and a Scala REPL is being shared among all interpreters in the group. 
So every note will be sharing single SparkContext and single Scala REPL. 
In this mode, if <code>Note A</code> defines variable ‘a’ then <code>Note B</code> not only able to read variable ‘a’ but also able to override the variable.</p>

<div class="text-center">
    <img src="/assets/themes/submarine/img/docs-img/interpreter_binding_mode-example-spark-scoped.png">
</div>

<p><br/></p>

<p>In Scoped mode, each note has its own Scala REPL. 
So variable defined in a note can not be read or overridden in another note. 
However, a single SparkContext still serves all the sessions.
And all the jobs are submitted to this SparkContext and the fair scheduler schedules the jobs.
This could be useful when user does not want to share Scala session, but want to keep single Spark application and leverage its fair scheduler.</p>

<p>In Isolated mode, each note has its own SparkContext and Scala REPL.</p>

<div class="text-center">
    <img src="/assets/themes/submarine/img/docs-img/interpreter_binding_mode-example-spark-isolated.png">
</div>

<p><br/></p>

  </div>
</div>


      <hr>
      <footer>
        <!-- <p>&copy; 2019 The Apache Software Foundation</p>-->
      </footer>
    </div>

    
  </body>
</html>

